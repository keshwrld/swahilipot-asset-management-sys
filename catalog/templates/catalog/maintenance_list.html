<!-- templates/catalog/maintenance_list.html -->
{% extends "base_generic.html" %}
{% load bootstrap4 %}
{% load static %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'dt/datatables.min.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'css/assets_list.css' %}"/>

<script type="text/javascript" src="{% static 'dt/datatables.min.js' %}"></script>

<div class="container mt-0">
    <h1 class="text-center text-primary">Damaged Assets</h1>

    <table id="damaged-assets" class="table table-striped table-hover table-bordered">
        <thead class="bg-primary text-white">
            <tr>
                <th>Asset</th>
                <th>Quantity</th>
                <th>Date Reported</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for damaged_asset in damaged_assets %}
            <tr>
                <td>{{ damaged_asset.asset.name }}</td>
                <td>{{ damaged_asset.quantity }}</td>
                <td>{{ damaged_asset.date_reported }}</td>
                <td>
                    <a href="{% url 'catalog:fix_damaged_asset' damaged_asset.pk %}" class="btn btn-secondary btn-sm">Fix</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">No damaged assets to display.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<script>
    $(document).ready(function() {
        var table = $('#damaged-assets').DataTable({
            "pagingType": "full_numbers",
            "lengthMenu": [[25, 40, 60, -1], [25, 40, 60, "All"]],
            "bProcessing": true
        });

        // Add search functionality
        $('#search-input').on('keyup', function() {
            table.search(this.value).draw();
        });
    });
</script>

{% endblock %}
